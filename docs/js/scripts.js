document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".hamburger");function t(){function t(){window.matchMedia("(min-width: 500px)").matches?document.body.classList.remove("over_hidden"):e.classList.contains("hamburger_open")&&document.body.classList.add("over_hidden")}e.classList.toggle("hamburger_open"),document.querySelector(".nav").classList.toggle("nav_mobile"),document.querySelector(".header_line").classList.toggle("header_bgc_tr"),window.matchMedia("(max-width: 500px)").matches?document.body.classList.toggle("over_hidden"):document.body.classList.remove("over_hidden"),e.classList.contains("hamburger_open")?window.addEventListener("resize",t):window.removeEventListener("resize",t)}e.onclick=t,document.querySelectorAll(".nav a").forEach((function(e){e.onclick=t}));const n=document.querySelector("#header .header_line");let o=0;function c(){let e=window.scrollY;e>o?n.classList.add("hide"):n.classList.remove("hide"),o=e,window.scrollY>n.offsetHeight?n.classList.add("header_bgc"):n.classList.remove("header_bgc")}window.addEventListener("scroll",c),window.addEventListener("touchmove",c),document.querySelectorAll(".header_menu a").forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();document.querySelector(e.getAttribute("href")).scrollIntoView({behavior:"smooth"})}))})),document.querySelector("#getInTouchBtn").addEventListener("click",(function(e){e.preventDefault(),document.querySelector("#contacts").scrollIntoView({behavior:"smooth"})})),document.querySelectorAll(".bg_parallax").forEach((function(e){function t(t){let n=80*((t.pageX-window.scrollX)/window.innerWidth-.5),o=30*((t.pageY-window.scrollY)/window.innerHeight-.5);e.style.backgroundPosition=`${50+n}% ${50+o}%`}e.addEventListener("mousemove",t),e||e.removeEventListener("mousemove",t)}));const r=document.querySelector("#tel"),i=/^(\+\d{1,3}[-\s]?)?(\(?\d{3}\)?[-\s]?)\d{3}[-\s]?\d{2}[-\s]?\d{2}$/g,l=/^(\+\d{1,3}[-\s]?)?(\(?\d{3}\)?[-\s]?)\d{2}[-\s]?\d{3}[-\s]?\d{2}$/g,a=/^(\+\d{1,3}[-\s]?)?(\(?\d{3}\)?[-\s]?)\d{2}[-\s]?\d{2}[-\s]?\d{3}$/g;let d=document.querySelector("#errorTel"),s=[];s.tel=!1,r.oninput=function(){let e=r.closest("form").querySelector(".disabledBtn"),t=r.value.replace(/[^+0-9\(\)\-\s]/g,"");r.value=t,t.length>0?t.length>=10?t.includes("(")&&!t.includes(")")||!t.includes("(")&&t.includes(")")?(s.tel=!0,d.innerHTML="Wrong number"):i.test(t)||l.test(t)||a.test(t)||i.test(t)||l.test(t)||a.test(t)?(s.tel=!1,d.innerHTML=""):(s.tel=!0,d.innerHTML="Wrong number"):s.tel=!0:s.tel=!1,s.tel||s.email?e.setAttribute("disabled",""):e.removeAttribute("disabled")};const u=/^([a-z][a-z0-9._-]+)(@[a-z][a-z0-9_-]+)(\.[a-z][a-z]+)(\.[a-z][a-z]+)?$/gi;s.email=!0,document.querySelectorAll(".email").forEach((function(e){e.oninput=function(){const t=e.closest("form").querySelector(".disabledBtn");let n=e.nextElementSibling,o=e.value;o.length>=10?u.test(o)||u.test(o)?(s.email=!1,n.innerHTML=""):(s.email=!0,n.innerHTML="Such email does NOT exist"):s.email=!0,s.tel||s.email?t.setAttribute("disabled",""):t.removeAttribute("disabled")}}));const m=document.querySelector("#sign_popup");function f(){m.classList.add("hidden"),document.body.classList.remove("over_hidden"),s.tel=!1,s.email=!1}document.querySelector("#getStarted").addEventListener("click",(function(){m.classList.remove("hidden"),document.body.classList.add("over_hidden"),m.addEventListener("click",(function(e){e.target===m&&f()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&f()})),m.querySelector("#closeBtn").onclick=f})),document.querySelectorAll(".contact_form [data-sign]").forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();const n=e.closest("form").querySelector('[name="name"]'),o=e.closest("form").querySelector('[name="email"]'),c=e.closest("form").querySelector('[name="tel"]');let r={name:n.value,email:o.value,tel:c?c.value:""};localStorage.setItem("user",JSON.stringify(r)),n.value=null,o.value=null,c&&(c.value=null),"signBtn"===e.getAttribute("id")?f():q()}))}));const h=document.querySelectorAll(".hacked");let v=0,g=null;document.querySelector(".triple_click").addEventListener("click",(function(){if(v++,clearTimeout(g),3===v){let e=[];h.forEach((function(t,n){e[n]=t.innerHTML,t.innerHTML="Triple click!",t.classList.add("red")})),setTimeout((function(){h.forEach((function(t,n){t.innerHTML=e[n],t.classList.remove("red")}))}),3e3),v=0}g=setTimeout((function(){v=0}),500)}));const y=document.querySelectorAll("#blog .text");let L=[];function w(e){e.preventDefault();const t=e.currentTarget,n=t.getAttribute("data_index"),o=y[n];"true"===o.getAttribute("data_is_full")?(o.innerText=L[n].slice(0,145)+" ...",t.innerText="Read more",o.setAttribute("data_is_full","false")):(o.innerText=L[n],t.innerText="Show less",o.setAttribute("data_is_full","true"))}y.forEach((function(e,t){e.innerText.length>150&&(L[t]=e.innerText,e.innerText=e.innerText.slice(0,145)+" ...",e.setAttribute("data_is_full","false"))})),document.querySelectorAll("#blog .readMore").forEach((function(e,t){e.setAttribute("data_index",t),e.addEventListener("click",w)}));const S=document.querySelector("#contactForm"),b=document.querySelector("#sendMsgPopup"),E=S.querySelector("#showConfirmBtn");function q(){b.classList.add("hidden"),s.email=!1}if(E.addEventListener("click",(function(){b.classList.remove("hidden"),b.addEventListener("click",(function(e){e.target===b&&q()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&q()})),document.querySelector("#cancelBtn").onclick=q})),null!==localStorage.getItem("user")){let e=JSON.parse(localStorage.getItem("user"));S.querySelector('[name="name"]').value=e.name,S.querySelector('[name="email"]').value=e.email,E.removeAttribute("disabled"),e.name?document.querySelector("#home .welcome").innerText+=`, ${e.name}`:document.querySelector("#home .welcome").innerText+=", anonymous"}function p(){document.querySelectorAll(".hiddenBlock").forEach((function(e){window.scrollY>=e.offsetTop-.33*window.innerHeight&&e.classList.add("appearBlock")}))}function _(){document.querySelectorAll(".hiddenChild").forEach((function(e){window.scrollY>=e.offsetTop-.5*window.innerHeight&&e.classList.add("appearChild")}))}window.addEventListener("scroll",p),window.addEventListener("touchmove",p),window.addEventListener("scroll",_),window.addEventListener("touchmove",_);const A=document.querySelector(".workCards"),T=[...document.querySelectorAll(".cardWork")],k=document.querySelectorAll(".categories a");let x=localStorage.getItem("filter");function M(e){let t=[];var n;e?T.forEach((function(n){n.getAttribute("data-category").split(",").includes(e)&&t.push(n)})):t=T,k.forEach((function(t){t.classList.remove("activeCategory"),t.getAttribute("data-category")===e?t.classList.add("activeCategory"):e||""!==t.getAttribute("data-category")||t.classList.add("activeCategory")})),n=t,A.innerHTML="",n.forEach((function(e){A.appendChild(e)}))}x&&M(x),k.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),x=e.getAttribute("data-category"),localStorage.setItem("filter",x),M(x)}))}))}));