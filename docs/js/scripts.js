document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".hamburger");function t(){function t(){window.matchMedia("(min-width: 500px)").matches?document.body.classList.remove("over_hidden"):e.classList.contains("hamburger_open")&&document.body.classList.add("over_hidden")}e.classList.toggle("hamburger_open"),document.querySelector(".nav").classList.toggle("nav_mobile"),document.querySelector(".header_line").classList.toggle("header_bgc_tr"),window.matchMedia("(max-width: 500px)").matches?document.body.classList.toggle("over_hidden"):document.body.classList.remove("over_hidden"),e.classList.contains("hamburger_open")?window.addEventListener("resize",t):window.removeEventListener("resize",t)}e.onclick=t,document.querySelectorAll(".nav a").forEach((function(e){e.onclick=t}));const n=document.querySelector("#header .header_line");let o=0;window.addEventListener("scroll",(function(){let e=window.scrollY;e>o?n.classList.add("hide"):n.classList.remove("hide"),o=e,window.scrollY>n.offsetHeight?n.classList.add("header_bgc"):n.classList.remove("header_bgc")})),document.querySelectorAll(".header_menu a").forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();document.querySelector(e.getAttribute("href")).scrollIntoView({behavior:"smooth"})}))})),document.querySelector("#getInTouchBtn").addEventListener("click",(function(e){e.preventDefault(),document.querySelector("#contactForm").scrollIntoView({behavior:"smooth"})})),document.querySelectorAll(".bg_parallax").forEach((function(e){function t(t){let n=70*((t.pageX-window.scrollX)/window.innerWidth-.5),o=20*((t.pageY-window.scrollY)/window.innerHeight-.5);e.style.backgroundPosition=`${50+n}% ${50+o}%`}e.addEventListener("mousemove",t),e||e.removeEventListener("mousemove",t)}));const c=document.querySelector("#tel"),r=/^(\+\d{1,3}[-\s]?)?(\(?\d{3}\)?[-\s]?)\d{3}[-\s]?\d{2}[-\s]?\d{2}$/g,l=/^(\+\d{1,3}[-\s]?)?(\(?\d{3}\)?[-\s]?)\d{2}[-\s]?\d{3}[-\s]?\d{2}$/g,i=/^(\+\d{1,3}[-\s]?)?(\(?\d{3}\)?[-\s]?)\d{2}[-\s]?\d{2}[-\s]?\d{3}$/g;let a=document.querySelector("#errorTel"),d=[];d.tel=!1,c.oninput=function(){let e=c.closest("form").querySelector(".disabledBtn"),t=c.value.replace(/[^+0-9\(\)\-\s]/g,"");c.value=t,t.length>0?t.length>=10?t.includes("(")&&!t.includes(")")||!t.includes("(")&&t.includes(")")?(d.tel=!0,a.innerHTML="Неправильно введений номер"):r.test(t)||l.test(t)||i.test(t)||r.test(t)||l.test(t)||i.test(t)?(d.tel=!1,a.innerHTML=""):(d.tel=!0,a.innerHTML="Неправильно введений номер"):d.tel=!0:d.tel=!1,d.tel||d.email?e.setAttribute("disabled",""):e.removeAttribute("disabled")};const s=/^([a-z][a-z0-9._-]+)(@[a-z][a-z0-9_-]+)(\.[a-z][a-z]+)(\.[a-z][a-z]+)?$/gi;d.email=!0,document.querySelectorAll(".email").forEach((function(e){e.oninput=function(){const t=e.closest("form").querySelector(".disabledBtn");let n=e.nextElementSibling,o=e.value;o.length>=10?s.test(o)||s.test(o)?(d.email=!1,n.innerHTML=""):(d.email=!0,n.innerHTML="Такої ел. адреси не існує"):d.email=!0,d.tel||d.email?t.setAttribute("disabled",""):t.removeAttribute("disabled")}}));const u=document.querySelector("#sign_popup");function m(){u.classList.add("hidden"),document.body.classList.remove("over_hidden"),d.tel=!1,d.email=!1}document.querySelector("#getStarted").addEventListener("click",(function(){u.classList.remove("hidden"),document.body.classList.add("over_hidden"),u.addEventListener("click",(function(e){e.target===u&&m()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&m()})),u.querySelector("#closeBtn").onclick=m}));const f=document.querySelector("#signBtn");f.addEventListener("click",(function(e){e.preventDefault();const t=f.closest("form").querySelector('[name="name"]'),n=f.closest("form").querySelector('[name="email"]'),o=f.closest("form").querySelector('[name="tel"]');let c={name:t.value,email:n.value,tel:o.value};localStorage.setItem("user",JSON.stringify(c)),t.value=null,n.value=null,o.value=null,m()}));const h=document.querySelectorAll(".hacked");let v=0,g=null;document.querySelector(".triple_click").addEventListener("click",(function(){if(v++,clearTimeout(g),3===v){let e=[];h.forEach((function(t,n){e[n]=t.innerHTML,t.innerHTML="Triple click!",t.classList.add("red")})),setTimeout((function(){h.forEach((function(t,n){t.innerHTML=e[n],t.classList.remove("red")}))}),3e3),v=0}g=setTimeout((function(){v=0}),500)}));const y=document.querySelectorAll("#blog .text");let L=[];function w(e){e.preventDefault();const t=e.currentTarget,n=t.getAttribute("data_index"),o=y[n];"true"===o.getAttribute("data_is_full")?(o.innerText=L[n].slice(0,145)+" ...",t.innerText="Read more",o.setAttribute("data_is_full","false")):(o.innerText=L[n],t.innerText="Show less",o.setAttribute("data_is_full","true"))}y.forEach((function(e,t){e.innerText.length>150&&(L[t]=e.innerText,e.innerText=e.innerText.slice(0,145)+" ...",e.setAttribute("data_is_full","false"))})),document.querySelectorAll("#blog .readMore").forEach((function(e,t){e.setAttribute("data_index",t),e.addEventListener("click",w)}));const S=document.querySelector("#contactForm"),b=document.querySelector("#sendMsgPopup"),q=S.querySelector("#showConfirmBtn");if(q.addEventListener("click",(function(){function e(){b.classList.add("hidden"),d.email=!1}b.classList.remove("hidden"),b.addEventListener("click",(function(t){t.target===b&&e()})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&e()})),document.querySelector("#cancelBtn").onclick=e})),null!==localStorage.getItem("user")){let e=JSON.parse(localStorage.getItem("user"));S.querySelector('[name="name"]').value=e.name,S.querySelector('[name="email"]').value=e.email,q.removeAttribute("disabled"),e.name?document.querySelector("#home .welcome").innerText+=`, ${e.name}`:document.querySelector("#home .welcome").innerText+=", anonymous"}function E(){document.querySelectorAll(".hiddenBlock").forEach((function(e){window.scrollY>=e.offsetTop-.33*window.innerHeight&&e.classList.add("appearBlock")}))}function p(){document.querySelectorAll(".hiddenChild").forEach((function(e){window.scrollY>=e.offsetTop-.5*window.innerHeight&&e.classList.add("appearChild")}))}window.addEventListener("scroll",E),window.addEventListener("touchmove",E),window.addEventListener("scroll",p),window.addEventListener("touchmove",p);const _=document.querySelector(".workCards"),T=[...document.querySelectorAll(".cardWork")],A=document.querySelectorAll(".categories a");let k=localStorage.getItem("filter");function x(e){let t=[];var n;e?T.forEach((function(n){n.getAttribute("data-category").split(",").includes(e)&&t.push(n)})):t=T,A.forEach((function(t){t.classList.remove("activeCategory"),t.getAttribute("data-category")===e?t.classList.add("activeCategory"):e||""!==t.getAttribute("data-category")||t.classList.add("activeCategory")})),n=t,_.innerHTML="",n.forEach((function(e){_.appendChild(e)}))}k&&x(k),A.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),k=e.getAttribute("data-category"),localStorage.setItem("filter",k),x(k)}))}))}));